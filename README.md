# UNITA 2026.01.09-01.13 3차 기본교육

본 교육은 인지 기술을 실제 테스트 차량으로 확장하기 위한 사전 단계로, Rviz2/TF/URDF와 카메라 좌표계·파라미터 이해를 바탕으로 2D‑LiDAR·카메라 센서 퓨전, 의사결정 주행 로직, 차량·센서 URDF 모델링을 팀 프로젝트로 수행하며 동아리 전체의 인지·통합 구현 역량을 끌어올리는 데 목적이 있다.

## 참여 인원 및 일시 & 장소
![image](img/unitA_2026_01_09_cover.jpg)
- **강의자**: 김형진  
- **교육 보조**: 윤제호, 이기현(1회)  
- **교육 참여자**:  
  김민서, 박근호, 성현영, 윤지윤, 윤제호, 이석빈, 이원종, 장동혁, 정가용, 정규민, 한주형, 강민수(1회), 이기현(1회)

- **교육 일시**: 2026년 01월 09일, 01월 13일 10:00 ~ 17:00  
  (점심시간 제외, 총 12시간)  
- **교육 장소**: 공과대학 8호관 117호  


## 교육 내용 정리
세부 강의 자료는 [pdf 자료](./UNITA2026_01_09.pdf) 참고
### A. Rviz2
![Decision_pt img](/img/unitA_2026_01_09_diagram_01.png)
1. **중앙 패널**: 3D 뷰에서 데이터 시각화와 회전/이동/확대·축소를 수행한다.
2. **디스플레이 패널**: 시각화 항목을 추가·관리하고 Global Options에서 고정 프레임을 설정한다.
3. **뷰 패널**: 카메라 시점을 전환하고 필요 시 저장·복원한다.
4. **Add 기능**: 필요한 디스플레이 요소를 선택해 추가한다. 

### B. TF & URDF
![Decision_pt img](/img/unitA_2026_01_09_diagram_02.png)
1. **TF 개요**: 로봇 링크와 센서 간 좌표 변환 관계를 표현한다.
2. **TF Broadcaster**: 프레임 관계와 위치·자세를 /tf 또는 /tf_static로 퍼블리시한다.
3. **TF Listener**: 퍼블리시된 TF를 구독해 좌표 변환을 조회·사용한다.
4. **TF Tree 확인**: `ros2 run tf2_tools view_frames`로 트리를 확인하고 PDF로 저장한다.
5. **URDF 역할**: 링크/조인트 구조와 센서 배치를 정의해 TF 기준을 제공한다.

### C. Camera
#### 가. 카메라의 모델에서 사용되는 4가지 좌표계.
1. Camera Coordinate System  
카메라 좌표계는 카메라의 광학 중심(optical center)이 원점이 되는 3D 좌표계로, 카메라 기준에서 물체의 위치를 표현한다.  
X, Y, Z 축으로 구성되며, Z축은 카메라가 바라보는 방향(optic axis)을 의미한다.  
이미지 평면(Image Plane)은 이 원점을 기준으로 Z축 방향으로 초점 거리(focal length)만큼 떨어진 위치에 놓인다.  

2. World Coordinate System  
월드 좌표계는 여러 카메라와 객체의 공간적 관계를 표현하기 위해 정의된 기준 좌표계이다.  
하나의 임의의 원점을 기준으로 U, V, W 축이 정의되며, 각 카메라의 위치와 자세는 이 좌표계를 기준으로 표현된다.  
동일한 물체라도 월드 좌표계(Pw)와 카메라 좌표계(Pc)에서의 좌표값은 서로 다르게 나타난다.  

1. Image (Film) Coordinate System  
이미지 좌표계는 이미지 평면 위의 2D 좌표계로, 핀홀 모델에서 광축과 수직으로 만나는 지점인 Principal Point(주점)을 원점으로 사용한다.  
이 좌표계는 카메라의 기하학적 투영 관계를 설명하는 데 사용되며, 렌즈 왜곡이나 내부 파라미터 분석의 기준이 된다.  

1. Pixel Coordinate System  
픽셀 좌표계는 실제 이미지가 저장·처리될 때 사용하는 2D 좌표계이다.  
좌표의 원점 위치는 사용하는 그래픽/비전 라이브러리에 따라 다르며, OpenCV는 좌상단, OpenGL은 좌하단을 원점으로 사용한다.  
이미지 좌표계를 픽셀 단위로 표현한 실용적인 좌표계라고 볼 수 있다.  

#### 나. 카메라 파라미터란?
![Decision_pt img](/img/unitA_2026_01_09_diagram_03.png)
#### 내부파라미터(Intrinsic Parameter)란?
카메라 렌즈와 이미지 센서 구조에 의해 결정되는 내부 파라미터로, 3차원 공간의 점이 이미지 평면에 투영될 때 이미지가 얼마나 이동하는지(2D Translation),  
얼마나 확대·축소되는지(2D Scaling), 그리고 얼마나 기울어져 표현되는지(2D Shear)를 정의한다  
1. 초점거리(Focal Length: fx, fy)
2. 주점 (Principal Point: cx, cy)
3. 비대칭 계수 (Skew Coefficient)

#### 외부파라미터(Extrinsic Parameter)란?
3D 공간에서 카메라가 실제로 어디에 위치해 있고(3D Translation), 어느 방향을 바라보고 있는지(3D Rotation)를 나타내는 파라미터로,  
카메라 좌표계와 외부(월드 또는 로봇) 좌표계 사이의 공간적 관계를 설명한다.  
외부 파라미터를 구하는 다양한 tool들이 있고, 연구들이 진행되고 있다.  

# 0. 경쟁형 퀴즈를 통한 팀 배치
세부사항은 quiz.md 참고
[quiz 설명](./quiz.md)
```
Score Board

1팀 김민서, 장동혁 3점.
2팀 이원종, 이기현 4점.
3팀 한주형, 윤지윤 5점.
4팀 정규민, 정가용 8점.
5팀 윤제호, 강민수 5점.
```
- **2D-LiDAR &CAM Sesor Fusion 팀**: 박근호, 윤제호, 정가용, 한주형, 강민수
- **판단기술 선행연구팀**: 김형진, 이석빈, 윤지윤, 장동혁, 이다빈
- **URDF 제작 및 차량 센서 배치 설계 팀**: 이원종, 정규민, 김민서, 성현영, 이기현

# 1. 팀별 주요 활동 내역 정리
## 2D-LiDAR &CAM Sesor Fusion 팀
- **목표**: Camera와 LiDAR의 장점을 결합하여 센서 융합을 수행하고 단점을 보완한다.
- **주요 과업**
  1. 이미지 위에 레이저 스캔 데이터가 투영되도록 구현한다.
  2. 학습된 객체의 거리를 측정 가능하도록 한다.
  3. 예시: 사람이 카메라에서 인식되면 사람-카메라 간 거리를 산출한다.
- **활동 이미지**: ![Sesor Fusion team img](/img/unitA_2026_01_09_activity_sensor_fusion.jpg)
- **결과 보고서**: [결과](./2DLiDAR_camera_sensor_fusion/README.md)


## 판단기술 선행연구팀
- **목표(01/09)**: 각 미션에 필요한 기술 및 알고리즘을 조사하고, 당일 발표 자료를 완성한다.
- **목표(01/13)**: 실 차량의 다양한 성능평가를 수행할 트랙을 고안하고, 설계한다.
- **주요 과업**
  1. 트랙 주행을 위한 경로 생성
  2. 주차
  3. 장애물 회피
  4. 장애물 감지 시 정지
- **발표 일정**: 16:30 발표 시작을 목표로 자료를 완성한다.
- **활동 이미지**: ![Decision_pt img](/img/unitA_2026_01_09_activity_decision.jpg)
- **결과 보고서**: [결과](./Decision_making_related_work/README.md)


## URDF 제작 및 차량 센서 배치 설계 팀
- **목표**: 차량 + 센서 TF가 포함된 단일 URDF 파일을 완성하고 RViz2에서 정상 시각화한다.
- **주요 과업**
  1. 센서 TF 반영: 차량 바디 기준으로 카메라/라이다/초음파 센서 TF를 반영한다.
  2. 차량 Mesh 적용: H-Mobility class 코드의 차량 mesh 파일을 URDF에 적용한다.
  3. RViz2 시각화: 단일 URDF 파일만으로 TF가 브로드캐스트되도록 구성한다.
- **최종 결과**
  1. 차량 + 센서 TF가 포함된 하나의 URDF 파일
  2. RViz2에서 차량 모델과 TF 트리가 정상 확인
- **활동 이미지**: ![firmware team img](/img/unitA_2026_01_09_activity_urdf.jpg)
- **결과 보고서**: [결과](./Car_URDF/README.md)

